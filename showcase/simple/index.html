<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="referrer" content="no-referrer">

        <title>TS Compiler in Browser</title>
    </head>
    <body>
        <script type="module">
            import {TsWebCompiler, installSW} from "../../loader/front.js";

            const sw = await installSW("./service-worker.js");

            const jsSources = await new TsWebCompiler().compileTs("./ts/main_module.ts");
            sw.active.postMessage(jsSources);
            await new Promise(ok => setTimeout(ok(), 100));
            const mainModule = await import("./ts/main_module.js");
            mainModule.main();
        </script>
    </body>
</html>
